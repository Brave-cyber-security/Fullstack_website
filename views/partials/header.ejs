<% if (typeof isAdmin !== 'undefined' && isAdmin && !isMaster) { %>
  <!-- Admin users get the sidebar layout -->
  <%- include('admin-header', { currentPage: typeof currentPage !== 'undefined' ? currentPage : '' }) %>
<% } else if (typeof isMaster !== 'undefined' && isMaster) { %>
  <!-- Master users get the master sidebar layout -->
  <%- include('master-header', { currentPage: typeof currentPage !== 'undefined' ? currentPage : '' }) %>
<% } else { %>
  <!-- Regular users and customers get the traditional navbar -->
  <header class="site-header">
    <div class="container">
      <div class="logo">
        <a href="/">
          <i class="fas fa-tools"></i>
          Dern-Support
        </a>
      </div>
      
      <nav class="nav-links">
        <a href="/">Home</a>
        <a href="/#services">Services</a>
        <a href="/knowledge/search">Knowledge Base</a>
        <% if (typeof currentUser !== 'undefined' && currentUser) { %>
          <% if (typeof isMaster !== 'undefined' && isMaster) { %>
            <a href="/master/dashboard">Master Dashboard</a>
          <% } else if (typeof isAdmin !== 'undefined' && isAdmin) { %>
            <a href="/admin/dashboard">Admin Dashboard</a>
          <% } else { %>
            <a href="/customer/dashboard">Dashboard</a>
            <a href="/customer/support/new" class="btn btn-primary btn-sm">New Request</a>
          <% } %>
          <a href="/logout" class="btn btn-outline-primary btn-sm">Logout</a>
        <% } else { %>
          <a href="/guest-support" class="btn btn-accent btn-sm">Quick Support</a>
          <a href="/login">Login</a>
          <a href="/signup" class="btn btn-primary btn-sm">Sign Up</a>
        <% } %>
      </nav>
      
      <!-- Mobile menu toggle -->
      <button class="mobile-menu-toggle">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </header>
<% } %>
